<!DOCTYPE html>
<html lang="nl">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Alfabet Boekje - QR Test met Instascan</title>
  <link rel="stylesheet" href="style.css">
  <!-- Gebruik Instascan via index.min.js CDN -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/instascan/1.0.0/index.min.js"></script>
</head>
<body>
  <div class="container">
    <h1>Alfabet Boekje - QR Test met Instascan</h1>
    <button id="startButton" class="start-button">START</button>
    <video id="preview" width="100%" height="auto" style="display: none;"></video>
    <div id="output" class="output" style="display: none;">
      <h2 id="letter"></h2>
      <img id="image" src="" alt="Afbeelding" class="word-image">
      <audio id="audioPlayer"></audio>
    </div>
  </div>

  <script>
    const startButton = document.getElementById('startButton');
    const preview = document.getElementById('preview');
    const output = document.getElementById('output');
    const letterDisplay = document.getElementById('letter');
    const imageDisplay = document.getElementById('image');
    const audioPlayer = document.getElementById('audioPlayer');

    // Woordenlijst met links naar audio en afbeelding
    const woordenlijst = {
      "A": { woord: "Aap", audio: "audio/aap.mp3", image: "images/aap.jpg" },
      // Voeg andere letters toe op dezelfde manier
    };

    startButton.addEventListener('click', () => {
      console.log("START-knop is geklikt");
      preview.style.display = 'block';
      startQRScanner();
    });

    function startQRScanner() {
      let scanner = new Instascan.Scanner({ video: preview });
      scanner.addListener('scan', function (content) {
        console.log("QR code gescand:", content);
        const letter = content.trim();
        if (woordenlijst[letter]) {
          preview.style.display = 'none';
          showOutput(letter);
          scanner.stop();
        } else {
          alert("Deze letter is niet beschikbaar.");
        }
      });

      Instascan.Camera.getCameras().then(function (cameras) {
        if (cameras.length > 0) {
          scanner.start(cameras[0]);
        } else {
          alert('Geen camera beschikbaar.');
        }
      }).catch(function (e) {
        console.error(e);
        alert("Er is een probleem met toegang tot de camera.");
      });
    }

    function showOutput(letter) {
      const { woord, audio, image } = woordenlijst[letter];
      letterDisplay.textContent = `${letter} - ${woord}`;
      imageDisplay.src = image;
      audioPlayer.src = audio;
      audioPlayer.play();
      output.style.display = 'block';
    }
  </script>
</body>
</html>
